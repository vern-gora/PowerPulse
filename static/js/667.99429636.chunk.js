"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[667],{331:function(e,t,s){s.r(t),s.d(t,{default:function(){return He}});var c=s(9439),r=s(2791),a=s(3855),o=s(184),n=function(e){var t=e.title,s=e.style;return(0,o.jsx)("h2",{className:s,children:t})},l=s(5125),d="ProductsItem_cardContainer__Ho9Ps",i="ProductsItem_cardHeadContainer__mQH6j",u="ProductsItem_cardCategoryName__tWROl",_="ProductsItem_addProductBtn__FlW25",m="ProductsItem_addBtnIcon__D7JeO",h="ProductsItem_recommendWrapper__atAvR",p="ProductsItem_labelRecommend__ZlNgg",x="ProductsItem_labelNotRecommended__wZIIp",g="ProductsItem_recommendText__tCLoD",j="ProductsItem_singleCardTitle__-ILEZ",N="ProductsItem_cardRunningIcon__CZ0xb",f="ProductsItem_cardHeaderWrapper__D6Zzb",P="ProductsItem_cardProductStats__0Ausm",v="ProductsItem_cardProdStatItem__CpHza",w="ProductsItem_cardProdStatItemText__1Sjmb",y="ProductsItem_warning__JGZAz",C="ProductsItem_highlightedText__DiAzj",b="ProductsItem_notFoundText__zpC8e",S="ProductsItem_productItem__rV6k2",I={getProducts:function(e){return e.products.productList},getIsLoading:function(e){return e.products.isLoading},getProductsCategories:function(e){return e.products.productsCategories},getFilter:function(e){return e.products.filter},getCurrentProduct:function(e){return e.products.currentProduct},getFilteredProducts:function(e){return e.products.filteredProducts}},B=s(4217),D=function(e){var t=e.onOpenModal,s=e.categoryFilter,c=e.filterByRecommended,r=e.filterByBloodType,n=(0,a.v9)(I.getProducts),D=(0,a.v9)(I.getFilter),k=(0,a.v9)(B.dy).blood||"1",A=n.filter((function(e){return e.title.toLowerCase().includes(D.toLowerCase())})).filter((function(e){return e.category.toLowerCase().includes(s.toLowerCase())})),M=function(){return r&&c?A.filter((function(e){return e.groupBloodNotAllowed[k]})):r&&!c?A.filter((function(e){return!e.groupBloodNotAllowed[k]})):A};return 0===M().length?(0,o.jsxs)("div",{className:y,children:[(0,o.jsxs)("p",{className:b,children:[(0,o.jsx)("span",{className:C,children:"Sorry, no results were found"})," ","for the product filters you selected. You may want to consider other search options to find the product you want. Our range is wide and you have the opportunity to find more options that suit your needs."]}),(0,o.jsx)("p",{className:C,children:"Try changing the search parameters."})]}):M().map((function(e){var s=e.category,c=e.calories,r=e.title,a=e.weight,n=e._id,y=e.groupBloodNotAllowed;return(0,o.jsx)("li",{"data-id":n,className:S,children:(0,o.jsxs)("div",{className:d,children:[(0,o.jsxs)("div",{className:i,children:[(0,o.jsx)("div",{className:u,children:"Diet"}),(0,o.jsxs)("div",{className:h,children:[(0,o.jsx)("span",{className:y[k]?p:x}),(0,o.jsx)("p",{className:g,children:"Recommended"})]}),(0,o.jsxs)("button",{type:"button",className:_,onClick:t,children:["Add",(0,o.jsx)("svg",{className:m,width:"16",height:"16",children:(0,o.jsx)("use",{href:l.Z+"#arrow_add_icon"})})]})]}),(0,o.jsxs)("div",{className:f,children:[(0,o.jsx)("svg",{className:N,width:"24",height:"24",children:(0,o.jsx)("use",{href:l.Z+"#running_stick_figure_icon"})}),(0,o.jsx)("h3",{className:j,children:r})]}),(0,o.jsxs)("div",{className:P,children:[(0,o.jsxs)("p",{className:v,children:[(0,o.jsx)("span",{className:w,children:"Calories:"})," ",c]}),(0,o.jsxs)("p",{className:v,children:[(0,o.jsx)("span",{className:w,children:"Category: "}),s]}),(0,o.jsxs)("p",{className:v,children:[(0,o.jsx)("span",{className:w,children:"Weight:"})," ",a]})]})]})},n)}))},k="FilterProducts_searchLabel__FkkTn",A="FilterProducts_searchIcon__nn4HX",M="FilterProducts_filterBtn__hcT2I",W="FilterProducts_searchField__1sFnJ",Z="FilterProducts_clearSearchIcon__F+9OF",F="FilterProducts_clearFilterBtn__R6Yqk",T=s(4494),L=function(){var e=(0,r.useState)(!0),t=(0,c.Z)(e,2),s=t[0],n=t[1],d=(0,a.I0)();return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("label",{className:k,children:[(0,o.jsx)("button",{type:"button",className:M,children:(0,o.jsx)("svg",{className:A,width:"18",height:"18",children:(0,o.jsx)("use",{href:l.Z+"#search_icon"})})}),!s&&(0,o.jsx)("button",{className:F,type:"button",onClick:function(e){e.currentTarget.nextElementSibling.value="",n(!0),d((0,T.Dg)())},children:(0,o.jsx)("svg",{className:Z,width:"18",height:"18",children:(0,o.jsx)("use",{href:l.Z+"#close_icon"})})}),(0,o.jsx)("input",{className:W,type:"text",placeholder:"Search",onChange:function(e){""!==e.currentTarget.value?n(!1):n(!0)},onBlur:function(e){d((0,T.ft)(e.currentTarget.value))}})]})})},R=s(5984),E="DropDownSelectors_categoryListWrapper__ML40J",Y="DropDownSelectors_dropBtnDown__59GGP",O="DropDownSelectors_dropDownIcon__5aEDt",U="DropDownSelectors_catDropList__YaOVf",H="DropDownSelectors_categoryItem__7CNZq",V="DropDownSelectors_selectCatBtn__HVorH",z="DropDownSelectors_dropDownAllWrapper__2UmxQ",J="DropDownSelectors_dropAllBtn__FRZLp",Q="DropDownSelectors_allDropList__mm178",G="DropDownSelectors_typeItem__76rCW",X=s(5612),q=function(e){var t=e.onCategoryFilterSelect,s=e.onTypeSelect,n=(0,r.useState)(!1),d=(0,c.Z)(n,2),i=d[0],u=d[1],_=(0,r.useState)(!1),m=(0,c.Z)(_,2),h=m[0],p=m[1],x=(0,a.I0)(),g=(0,a.v9)(B.dy),j=(0,a.v9)(I.getProductsCategories),N=function(e){var s=e.currentTarget.dataset.category;t(s),u(!1)},f=function(e){var t=e.currentTarget.dataset.type;s(t),p(!1);var c=g.blood,r={category:"".concat(c)};x(X.Z.getFilteredProducts(r))};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:E,children:[(0,o.jsxs)("button",{type:"button",className:Y,onClick:function(){u(!0),p(!1),i&&u(!1)},children:["Categories",(0,o.jsx)("svg",{className:O,width:"18",height:"18",children:(0,o.jsx)("use",{href:l.Z+"#icon-chevron-down"})})]}),i&&(0,o.jsxs)("ul",{className:U,children:[(0,o.jsx)("li",{className:H,children:(0,o.jsx)("button",{type:"button",className:V,"data-category":"all",onClick:N,children:"All categories"})},(0,R.x0)(5)),j.map((function(e){return(0,o.jsx)("li",{className:H,children:(0,o.jsx)("button",{type:"button",className:V,onClick:N,"data-category":e,children:e})},(0,R.x0)(5))}))]})]}),(0,o.jsxs)("div",{className:z,children:[(0,o.jsxs)("button",{type:"button",className:J,onClick:function(){p(!0),u(!1),h&&p(!1)},children:["All",(0,o.jsx)("svg",{className:O,width:"18",height:"18",children:(0,o.jsx)("use",{href:l.Z+"#icon-chevron-down"})})]}),h&&(0,o.jsxs)("ul",{className:Q,children:[(0,o.jsx)("li",{className:G,children:(0,o.jsx)("button",{type:"button",className:V,onClick:f,"data-type":"all",children:"All"})},(0,R.x0)(5)),(0,o.jsx)("li",{className:G,children:(0,o.jsx)("button",{type:"button",className:V,onClick:f,"data-type":"recommended",children:"Recommended"})},(0,R.x0)(5)),(0,o.jsx)("li",{className:G,children:(0,o.jsx)("button",{type:"button",className:V,onClick:f,"data-type":"not-recommended",children:"Not recommended"})},(0,R.x0)(5))]})]})]})},K=s(5748),$="ProductsPage_dropDownContainer__VJh-k",ee="ProductsPage_productsTitle__IauG3",te="ProductsPage_prodContainer__QPuXY",se="ProductsPage_desktopCntrlWrap__OtYxc",ce="ProductsPage_cardsWrapper__k697g",re="ProductsPage_filtersTitle__MASnC",ae="ProductsPage_filtersCtrls__Sl8V6",oe=s(1413),ne=s(4164),le=s(5705),de=s(1087),ie="AddProductSuccess_overlay__bgeXN",ue="AddProductSuccess_successWrap__borPA",_e="AddProductSuccess_closeBasicModal__YLoav",me="AddProductSuccess_closeBasicModalIcon__jkeXD",he="AddProductSuccess_successData__MrYia",pe="AddProductSuccess_successImg__y+iQ6",xe="AddProductSuccess_wellDone__ankeW",ge="AddProductSuccess_kcal__SUwX5",je="AddProductSuccess_kcalNumber__QwIs1",Ne="AddProductSuccess_nextBtn__Gd9E-",fe="AddProductSuccess_linkWrapper__IRdIn",Pe="AddProductSuccess_link__mTD8S",ve="AddProductSuccess_linkArrow__vAYUI",we=s.p+"static/media/avocado.95c6cd4821299887e2bb.png",ye=function(e){var t=e.onCloseModal,s=e.consumedCalories;return(0,o.jsx)("div",{className:ie,children:(0,o.jsxs)("div",{className:ue,children:[(0,o.jsx)("button",{type:"button",className:_e,onClick:t,children:(0,o.jsx)("svg",{className:me,width:"22",height:"22",children:(0,o.jsx)("use",{href:l.Z+"#close_icon"})})}),(0,o.jsxs)("div",{className:he,children:[(0,o.jsx)("img",{src:we,alt:"Success",className:pe}),(0,o.jsx)("p",{className:xe,children:"Well done"}),(0,o.jsxs)("p",{className:ge,children:["Calories:"," ",(0,o.jsx)("span",{className:je,children:s})]}),(0,o.jsx)("button",{type:"button",className:Ne,onClick:t,children:"Next product"}),(0,o.jsxs)("div",{className:fe,children:[(0,o.jsxs)(de.rU,{to:"/diary",className:Pe,children:["To the diary"," "]}),(0,o.jsx)("svg",{width:"16",height:"16",children:(0,o.jsx)("use",{href:l.Z+"#arrow_add_icon",className:ve})})]})]})]})})},Ce="BasicModalWindow_overlay__s-mcD",be="BasicModalWindow_basicModalContainer__P3nRC",Se="BasicModalWindow_selectedProductDescr__+Yh-+",Ie="BasicModalWindow_productCardPopUp__d3+uW",Be="BasicModalWindow_caloriesCount__qECr1",De="BasicModalWindow_basicModalSelectedProduct__z2jpB",ke="BasicModalWindow_basicModalFormInput__bpJz9",Ae="BasicModalWindow_weightLabel__gPTUQ",Me="BasicModalWindow_closeBasicModal__hSwTK",We="BasicModalWindow_closeBasicModalIcon__bsEtp",Ze="BasicModalWindow_basicModalForm__fk1Ur",Fe="BasicModalWindow_selectedProdBtns__d3Fm6",Te="BasicModalWindow_addDiaryBtn__nsOIB",Le="BasicModalWindow_cancelAddBtn__eWEAQ",Re="BasicModalWindow_kcalNumber__dxhRY",Ee=s(5119),Ye=document.querySelector("#modal-root"),Oe=function(e){var t=e.onCloseModal,s=(0,r.useState)(0),n=(0,c.Z)(s,2),d=n[0],i=n[1],u=(0,r.useState)(!1),_=(0,c.Z)(u,2),m=_[0],h=_[1],p=(0,a.I0)(),x=(0,a.v9)(I.getCurrentProduct),g=x.title,j=d*x.calories/100;return(0,ne.createPortal)(m?(0,o.jsx)(ye,{onCloseModal:t,consumedCalories:j}):(0,o.jsx)("div",{className:Ce,children:(0,o.jsxs)("div",{className:be,children:[(0,o.jsx)("button",{type:"button",className:Me,onClick:t,children:(0,o.jsx)("svg",{className:We,width:"22",height:"22",children:(0,o.jsx)("use",{href:l.Z+"#close_icon"})})}),(0,o.jsxs)("div",{className:Se,children:[(0,o.jsxs)("div",{className:Ie,children:[(0,o.jsx)(le.J9,{initialValues:{product:g},children:(0,o.jsxs)(le.l0,{className:Ze,children:[(0,o.jsx)(le.gN,{as:function(e){return(0,o.jsx)("input",(0,oe.Z)({className:De,type:"text",value:g},e))},name:"product",value:g,className:De}),(0,o.jsx)(le.gN,{className:ke,type:"text",name:"weight",label:"grams",onChange:function(e){i(e.currentTarget.value)}})]})}),(0,o.jsx)("span",{className:Ae,children:"grams"})]}),(0,o.jsxs)("p",{className:Be,children:["Calories:",(0,o.jsxs)("span",{className:Re,children:[" ",j||0]})]}),(0,o.jsxs)("div",{className:Fe,children:[(0,o.jsx)("button",{type:"submit",className:Te,onClick:function(e){e.preventDefault();var t={productId:x._id,amount:d,calories:j};p((0,Ee.VI)(t)),h(!0)},children:"Add to diary"}),(0,o.jsx)("button",{type:"button",className:Le,onClick:t,children:"Cancel"})]})]})]})}),Ye)},Ue=s(9273),He=function(){var e=(0,r.useState)(!1),t=(0,c.Z)(e,2),s=t[0],l=t[1],d=(0,r.useState)(""),i=(0,c.Z)(d,2),u=i[0],_=i[1],m=(0,r.useState)(!1),h=(0,c.Z)(m,2),p=h[0],x=h[1],g=(0,r.useState)(!1),j=(0,c.Z)(g,2),N=j[0],f=j[1],P=(0,a.I0)(),v=(0,a.v9)(I.getProducts);(0,r.useEffect)((function(){P((0,Ue.n6)())}),[P]),(0,r.useEffect)((function(){P(X.Z.fetchProducts())}),[P]),(0,r.useEffect)((function(){P(X.Z.fetchProductsCategories())}),[P]);return(0,o.jsxs)("div",{className:te,children:[(0,o.jsx)("p",{className:re,children:"Filters"}),(0,o.jsxs)("div",{className:se,children:[(0,o.jsx)(n,{style:ee,title:"Products"}),(0,o.jsxs)("div",{className:ae,children:[(0,o.jsx)(L,{}),(0,o.jsx)("div",{className:$,children:(0,o.jsx)(q,{onCategoryFilterSelect:function(e){_("all"!==e?e:"")},onTypeSelect:function(e){switch(e){case"recommended":x(!0),f(!0);break;case"not-recommended":x(!1),f(!0);break;default:x(!1),f(!1)}}})})]})]}),0!==v.length?(0,o.jsx)("ul",{className:ce,children:(0,o.jsx)(D,{onOpenModal:function(e){var t=e.target.closest("li").dataset.id;P(X.Z.getProductById(t)),l(!0)},categoryFilter:u,filterByRecommended:p,filterByBloodType:N})}):(0,o.jsx)(K._P,{height:"100",width:"100",color:"#e6533c",ariaLabel:"rings-loading",wrapperStyle:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100vh"},wrapperClass:"",visible:!0,firstLineColor:"",middleLineColor:"",lastLineColor:""}),s&&(0,o.jsx)(Oe,{onCloseModal:function(){l(!1)}})]})}},4217:function(e,t,s){s.d(t,{$y:function(){return r},dy:function(){return c}});var c=function(e){return e.auth.user},r=function(e){return e.auth.goToParams}},5984:function(e,t,s){s.d(t,{x0:function(){return c}});var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(e)).reduce((function(e,t){return e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"}),"")}}}]);
//# sourceMappingURL=667.99429636.chunk.js.map