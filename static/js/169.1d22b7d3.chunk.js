"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[169],{4610:function(e,t,s){s.r(t),s.d(t,{default:function(){return Ye}});var c=s(9439),r=s(2791),a=s(9434),o=s(184),n=function(e){var t=e.title,s=e.style;return(0,o.jsx)("h2",{className:s,children:t})},l=s(5125),d="ProductsItem_cardContainer__Ho9Ps",i="ProductsItem_cardHeadContainer__mQH6j",u="ProductsItem_cardCategoryName__tWROl",_="ProductsItem_addProductBtn__FlW25",m="ProductsItem_addBtnIcon__D7JeO",h="ProductsItem_recommendWrapper__atAvR",p="ProductsItem_labelRecommend__ZlNgg",g="ProductsItem_labelNotRecommended__wZIIp",x="ProductsItem_recommendText__tCLoD",j="ProductsItem_singleCardTitle__-ILEZ",N="ProductsItem_cardRunningIcon__CZ0xb",f="ProductsItem_cardHeaderWrapper__D6Zzb",P="ProductsItem_cardProductStats__0Ausm",v="ProductsItem_cardProdStatItem__CpHza",w="ProductsItem_cardProdStatItemText__1Sjmb",C="ProductsItem_productItem__rV6k2",y={getProducts:function(e){return e.products.productList},getIsLoading:function(e){return e.products.isLoading},getProductsCategories:function(e){return e.products.productsCategories},getFilter:function(e){return e.products.filter},getCurrentProduct:function(e){return e.products.currentProduct},getFilteredProducts:function(e){return e.products.filteredProducts}},b=s(4217),S=function(e){var t=e.onOpenModal,s=e.categoryFilter,c=e.filterByRecommended,r=e.filterByBloodType,n=(0,a.v9)(y.getProducts),S=(0,a.v9)(y.getFilter),I=(0,a.v9)(b.dy).user.blood||"1",B=n.filter((function(e){return e.title.toLowerCase().includes(S.toLowerCase())})).filter((function(e){return e.category.toLowerCase().includes(s.toLowerCase())}));return(r&&c?B.filter((function(e){return e.groupBloodNotAllowed[I]})):r&&!c?B.filter((function(e){return!e.groupBloodNotAllowed[I]})):B).map((function(e){var s=e.category,c=e.calories,r=e.title,a=e.weight,n=e._id,y=e.groupBloodNotAllowed;return(0,o.jsx)("li",{"data-id":n,className:C,children:(0,o.jsxs)("div",{className:d,children:[(0,o.jsxs)("div",{className:i,children:[(0,o.jsx)("div",{className:u,children:"Diet"}),(0,o.jsxs)("div",{className:h,children:[(0,o.jsx)("span",{className:y[I]?p:g}),(0,o.jsx)("p",{className:x,children:"Recommended"})]}),(0,o.jsxs)("button",{type:"button",className:_,onClick:t,children:["Add",(0,o.jsx)("svg",{className:m,width:"16",height:"16",children:(0,o.jsx)("use",{href:l.Z+"#arrow_add_icon"})})]})]}),(0,o.jsxs)("div",{className:f,children:[(0,o.jsx)("svg",{className:N,width:"24",height:"24",children:(0,o.jsx)("use",{href:l.Z+"#running_stick_figure_icon"})}),(0,o.jsx)("h3",{className:j,children:r})]}),(0,o.jsxs)("div",{className:P,children:[(0,o.jsxs)("p",{className:v,children:[(0,o.jsx)("span",{className:w,children:"Calories:"})," ",c]}),(0,o.jsxs)("p",{className:v,children:[(0,o.jsx)("span",{className:w,children:"Category: "}),s]}),(0,o.jsxs)("p",{className:v,children:[(0,o.jsx)("span",{className:w,children:"Weight:"})," ",a]})]})]})},n)}))},I="FilterProducts_searchLabel__FkkTn",B="FilterProducts_searchIcon__nn4HX",D="FilterProducts_filterBtn__hcT2I",k="FilterProducts_searchField__1sFnJ",M="FilterProducts_clearSearchIcon__F+9OF",A="FilterProducts_clearFilterBtn__R6Yqk",F=s(4494),Z=s(5612),W=function(){var e=(0,r.useState)(!0),t=(0,c.Z)(e,2),s=t[0],n=t[1],d=(0,a.I0)(),i=(0,a.v9)(y.getFilter);return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("label",{className:I,children:[(0,o.jsx)("button",{type:"button",className:D,children:(0,o.jsx)("svg",{className:B,width:"18",height:"18",children:(0,o.jsx)("use",{href:l.Z+"#search_icon"})})}),!s&&(0,o.jsx)("button",{className:A,type:"button",onClick:function(e){e.currentTarget.nextElementSibling.value="",n(!0),d((0,F.Dg)())},children:(0,o.jsx)("svg",{className:M,width:"18",height:"18",children:(0,o.jsx)("use",{href:l.Z+"#close_icon"})})}),(0,o.jsx)("input",{className:k,type:"text",placeholder:"Search",onChange:function(e){""!==e.currentTarget.value?n(!1):n(!0)},onBlur:function(e){d((0,F.ft)(e.currentTarget.value));var t={category:"".concat(i)};d(Z.Z.getFilteredProducts(t))}})]})})},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(e)).reduce((function(e,t){return e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"}),"")},T="DropDownSelectors_categoryListWrapper__ML40J",R="DropDownSelectors_dropBtnDown__59GGP",E="DropDownSelectors_dropDownIcon__5aEDt",Y="DropDownSelectors_catDropList__YaOVf",U="DropDownSelectors_categoryItem__7CNZq",H="DropDownSelectors_selectCatBtn__HVorH",O="DropDownSelectors_dropDownAllWrapper__2UmxQ",V="DropDownSelectors_dropAllBtn__FRZLp",Q="DropDownSelectors_allDropList__mm178",J="DropDownSelectors_typeItem__76rCW",X=function(e){var t=e.onCategoryFilterSelect,s=e.onTypeSelect,n=(0,r.useState)(!1),d=(0,c.Z)(n,2),i=d[0],u=d[1],_=(0,r.useState)(!1),m=(0,c.Z)(_,2),h=m[0],p=m[1],g=(0,a.I0)(),x=(0,a.v9)(b.dy),j=(0,a.v9)(y.getProductsCategories),N=function(e){var s=e.currentTarget.dataset.category,c={category:"".concat(s)};g(Z.Z.getFilteredProducts(c)),t(s),u(!1)},f=function(e){var t=e.currentTarget.dataset.type;s(t),p(!1);var c=x.user.blood,r={category:"".concat(c)};g(Z.Z.getFilteredProducts(r))};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:T,children:[(0,o.jsxs)("button",{type:"button",className:R,onClick:function(){u(!0),p(!1),i&&u(!1)},children:["Categories",(0,o.jsx)("svg",{className:E,width:"18",height:"18",children:(0,o.jsx)("use",{href:l.Z+"#icon-chevron-down"})})]}),i&&(0,o.jsxs)("ul",{className:Y,children:[(0,o.jsx)("li",{className:U,children:(0,o.jsx)("button",{type:"button",className:H,"data-category":"all",onClick:N,children:"All categories"})},L(5)),j.map((function(e){return(0,o.jsx)("li",{className:U,children:(0,o.jsx)("button",{type:"button",className:H,onClick:N,"data-category":e,children:e})},L(5))}))]})]}),(0,o.jsxs)("div",{className:O,children:[(0,o.jsxs)("button",{type:"button",className:V,onClick:function(){p(!0),u(!1),h&&p(!1)},children:["All",(0,o.jsx)("svg",{className:E,width:"18",height:"18",children:(0,o.jsx)("use",{href:l.Z+"#icon-chevron-down"})})]}),h&&(0,o.jsxs)("ul",{className:Q,children:[(0,o.jsx)("li",{className:J,children:(0,o.jsx)("button",{type:"button",className:H,onClick:f,"data-type":"all",children:"All"})},L(5)),(0,o.jsx)("li",{className:J,children:(0,o.jsx)("button",{type:"button",className:H,onClick:f,"data-type":"recommended",children:"Recommended"})},L(5)),(0,o.jsx)("li",{className:J,children:(0,o.jsx)("button",{type:"button",className:H,onClick:f,"data-type":"not-recommended",children:"Not recommended"})},L(5))]})]})]})},q=s(5748),z="ProductsPage_dropDownContainer__VJh-k",G="ProductsPage_productsTitle__IauG3",K="ProductsPage_prodContainer__QPuXY",$="ProductsPage_desktopCntrlWrap__OtYxc",ee="ProductsPage_cardsWrapper__k697g",te="ProductsPage_filtersTitle__MASnC",se="ProductsPage_filtersCtrls__Sl8V6",ce=s(1413),re=s(4164),ae=s(5705),oe=s(1087),ne="AddProductSuccess_overlay__bgeXN",le="AddProductSuccess_successWrap__borPA",de="AddProductSuccess_closeBasicModal__YLoav",ie="AddProductSuccess_closeBasicModalIcon__jkeXD",ue="AddProductSuccess_successData__MrYia",_e="AddProductSuccess_successImg__y+iQ6",me="AddProductSuccess_wellDone__ankeW",he="AddProductSuccess_kcal__SUwX5",pe="AddProductSuccess_kcalNumber__QwIs1",ge="AddProductSuccess_nextBtn__Gd9E-",xe="AddProductSuccess_linkWrapper__IRdIn",je="AddProductSuccess_link__mTD8S",Ne="AddProductSuccess_linkArrow__vAYUI",fe=s.p+"static/media/avocado.95c6cd4821299887e2bb.png",Pe=function(e){var t=e.onCloseModal,s=e.consumedCalories;return(0,o.jsx)("div",{className:ne,children:(0,o.jsxs)("div",{className:le,children:[(0,o.jsx)("button",{type:"button",className:de,onClick:t,children:(0,o.jsx)("svg",{className:ie,width:"22",height:"22",children:(0,o.jsx)("use",{href:l.Z+"#close_icon"})})}),(0,o.jsxs)("div",{className:ue,children:[(0,o.jsx)("img",{src:fe,alt:"Success",className:_e}),(0,o.jsx)("p",{className:me,children:"Well done"}),(0,o.jsxs)("p",{className:he,children:["Calories:"," ",(0,o.jsx)("span",{className:pe,children:s})]}),(0,o.jsx)("button",{type:"button",className:ge,onClick:t,children:"Next product"}),(0,o.jsxs)("div",{className:xe,children:[(0,o.jsxs)(oe.rU,{to:"/diary",className:je,children:["To the diary"," "]}),(0,o.jsx)("svg",{width:"16",height:"16",children:(0,o.jsx)("use",{href:l.Z+"#arrow_add_icon",className:Ne})})]})]})]})})},ve="BasicModalWindow_overlay__s-mcD",we="BasicModalWindow_basicModalContainer__P3nRC",Ce="BasicModalWindow_selectedProductDescr__+Yh-+",ye="BasicModalWindow_productCardPopUp__d3+uW",be="BasicModalWindow_caloriesCount__qECr1",Se="BasicModalWindow_basicModalSelectedProduct__z2jpB",Ie="BasicModalWindow_basicModalFormInput__bpJz9",Be="BasicModalWindow_weightLabel__gPTUQ",De="BasicModalWindow_closeBasicModal__hSwTK",ke="BasicModalWindow_closeBasicModalIcon__bsEtp",Me="BasicModalWindow_basicModalForm__fk1Ur",Ae="BasicModalWindow_selectedProdBtns__d3Fm6",Fe="BasicModalWindow_addDiaryBtn__nsOIB",Ze="BasicModalWindow_cancelAddBtn__eWEAQ",We="BasicModalWindow_kcalNumber__dxhRY",Le=s(5119),Te=document.querySelector("#modal-root"),Re=function(e){var t=e.onCloseModal,s=(0,r.useState)(0),n=(0,c.Z)(s,2),d=n[0],i=n[1],u=(0,r.useState)(!1),_=(0,c.Z)(u,2),m=_[0],h=_[1],p=(0,a.I0)(),g=(0,a.v9)(y.getCurrentProduct),x=g.title,j=d*g.calories/100;return(0,re.createPortal)(m?(0,o.jsx)(Pe,{onCloseModal:t,consumedCalories:j}):(0,o.jsx)("div",{className:ve,children:(0,o.jsxs)("div",{className:we,children:[(0,o.jsx)("button",{type:"button",className:De,onClick:t,children:(0,o.jsx)("svg",{className:ke,width:"22",height:"22",children:(0,o.jsx)("use",{href:l.Z+"#close_icon"})})}),(0,o.jsxs)("div",{className:Ce,children:[(0,o.jsxs)("div",{className:ye,children:[(0,o.jsx)(ae.J9,{initialValues:{product:x},children:(0,o.jsxs)(ae.l0,{className:Me,children:[(0,o.jsx)(ae.gN,{as:function(e){return(0,o.jsx)("input",(0,ce.Z)({className:Se,type:"text",value:x},e))},name:"product",value:x,className:Se}),(0,o.jsx)(ae.gN,{className:Ie,type:"text",name:"weight",label:"grams",onChange:function(e){i(e.currentTarget.value)}})]})}),(0,o.jsx)("span",{className:Be,children:"grams"})]}),(0,o.jsxs)("p",{className:be,children:["Calories:",(0,o.jsxs)("span",{className:We,children:[" ",j||0]})]}),(0,o.jsxs)("div",{className:Ae,children:[(0,o.jsx)("button",{type:"submit",className:Fe,onClick:function(e){e.preventDefault();var t=new Date,s=t.getMonth()+1,c=t.getFullYear(),r=t.getDate(),a="".concat(s,"/").concat(r,"/").concat(c),o={productId:g._id,date:a,amount:d,calories:j};p((0,Le.VI)(o)),h(!0)},children:"Add to diary"}),(0,o.jsx)("button",{type:"button",className:Ze,onClick:t,children:"Cancel"})]})]})]})}),Te)},Ee=s(9273),Ye=function(){var e=(0,r.useState)(!1),t=(0,c.Z)(e,2),s=t[0],l=t[1],d=(0,r.useState)(""),i=(0,c.Z)(d,2),u=i[0],_=i[1],m=(0,r.useState)(!1),h=(0,c.Z)(m,2),p=h[0],g=h[1],x=(0,r.useState)(!1),j=(0,c.Z)(x,2),N=j[0],f=j[1],P=(0,a.I0)(),v=(0,a.v9)(y.getProducts);(0,r.useEffect)((function(){P((0,Ee.Ec)())}),[P]),(0,r.useEffect)((function(){P(Z.Z.fetchProducts())}),[P]),(0,r.useEffect)((function(){P(Z.Z.fetchProductsCategories())}),[P]);return(0,o.jsxs)("div",{className:K,children:[(0,o.jsx)("p",{className:te,children:"Filters"}),(0,o.jsxs)("div",{className:$,children:[(0,o.jsx)(n,{style:G,title:"Products"}),(0,o.jsxs)("div",{className:se,children:[(0,o.jsx)(W,{}),(0,o.jsx)("div",{className:z,children:(0,o.jsx)(X,{onCategoryFilterSelect:function(e){_("all"!==e?e:"")},onTypeSelect:function(e){switch(e){case"recommended":g(!0),f(!0);break;case"not-recommended":g(!1),f(!0);break;default:g(!1),f(!1)}}})})]})]}),0!==v.length?(0,o.jsx)("ul",{className:ee,children:(0,o.jsx)(S,{onOpenModal:function(e){var t=e.target.closest("li").dataset.id;P(Z.Z.getProductById(t)),l(!0)},categoryFilter:u,filterByRecommended:p,filterByBloodType:N})}):(0,o.jsx)(q._P,{height:"100",width:"100",color:"#e6533c",ariaLabel:"rings-loading",wrapperStyle:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100vh"},wrapperClass:"",visible:!0,firstLineColor:"",middleLineColor:"",lastLineColor:""}),s&&(0,o.jsx)(Re,{onCloseModal:function(){l(!1)}})]})}},4217:function(e,t,s){s.d(t,{dy:function(){return c}});var c=function(e){return e.auth.user}}}]);
//# sourceMappingURL=169.1d22b7d3.chunk.js.map